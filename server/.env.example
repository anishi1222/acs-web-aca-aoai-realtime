#+#+#+#+############################################################
# Environment template
#
# Copy this file to .env and fill in values.
#   cp .env.example .env
#
# IMPORTANT
# - Do NOT commit .env (secrets). This repo ignores .env by default.
# - CALLBACK_URI_HOST must be a publicly reachable https URL for:
#     - Event Grid -> /api/incomingCall
#     - Call Automation callbacks -> /api/callbacks
#     - Media Streaming WebSocket -> /ws/media (wss)
#
# Minimal required (ACS + AOAI Realtime + public URL):
#   - AZURE_COMMUNICATION_CONNECTION_STRING
#   - CALLBACK_URI_HOST
#   - AZURE_OPENAI_ENDPOINT
#   - AZURE_OPENAI_DEPLOYMENT
#   - (Auth) AZURE_OPENAI_API_KEY (PoC) or Entra/Managed Identity depending on your setup
#
# Optional features:
#   - Foundry Agent (Web grounding): AZURE_AI_* or AZURE_FOUNDRY_* + valid auth via DefaultAzureCredential
#   - Teams interop: no env var needed; use POST /api/call/start with targetKind="teams" + entraObjectId
#+#+#+#+############################################################

# --- Azure Communication Services ---
AZURE_COMMUNICATION_CONNECTION_STRING=""

# Public base URL of the gateway/server (no trailing slash)
# Example (dev tunnel / ACA): https://<host>
CALLBACK_URI_HOST=""

# --- Azure OpenAI Realtime (Audio) ---
# Endpoint can be https://... or wss://...
AZURE_OPENAI_ENDPOINT=""
AZURE_OPENAI_DEPLOYMENT=""
AZURE_OPENAI_API_KEY=""
# Optional: set when your runtime requires an explicit API version
AZURE_OPENAI_API_VERSION=""
# Voice name used by the realtime model (default is 'sage' if unset)
AOAI_VOICE="sage"

# Optional: system prompt/instructions
# AOAI_INSTRUCTIONS_FILE=./prompts/aoai_instructions.txt
# AOAI_INSTRUCTIONS="あなたは..."

# --- (Optional) Microsoft Foundry Agent (Web grounding) ---
# Provide either AZURE_AI_* or AZURE_FOUNDRY_*.
# The Agent should have Web grounding enabled in Foundry.
# Auth: uses DefaultAzureCredential.
# - Local dev: `az login`
# - Azure runtime (ACA): Managed Identity / workload identity, etc.
#
# AZURE_AI_PROJECT_ENDPOINT=""
# AZURE_AI_AGENT_ID=""
#
# AZURE_FOUNDRY_PROJECT_ENDPOINT=""
# AZURE_FOUNDRY_AGENT_ID=""

# Agent execution control
# MEDIA_WS_AGENT_ENABLE=1
MEDIA_WS_AGENT_TIMEOUT_MS=2000
MEDIA_WS_AGENT_FALLBACK_PREFIX="今は検索できないので一般知識で答えます"

# Note: If the agent fails / times out / returns empty, only then the fallback prefix is used.

# --- Media WS / Audio pipeline (optional tuning) ---
# MEDIA_WS_ENABLE_AOAI=1
# MEDIA_WS_SEND_AUDIO_TO_ACS=1
# MEDIA_WS_RESAMPLER=soxr
MEDIA_WS_SOXR_QUALITY=VHQ
# UVICORN_LOG_LEVEL=info
